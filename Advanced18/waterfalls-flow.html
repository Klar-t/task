<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="waterfalls-flow.css">
    <title>瀑布流布局</title>
<head>
    <script src="https://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
<div class="content">
    <div class="item h1">
        1
    </div>
    <div class="item h3">
        2
    </div>
    <div class="item h2">
        3
    </div>
    <div class="item h1">
        4
    </div>
    <div class="item h1">
        5
    </div>
    <div class="item h3">
        6
    </div>
    <div class="item h3">
        7
    </div>
    <div class="item h2">
        8
    </div>
    <div class="item h1">
        9
    </div>
    <div class="item h3">
        10
    </div>
    <div class="item h3">
        11
    </div>
    <div class="item h3">
        12
    </div>
    <div class="item h2">
        13
    </div>
    <div class="item h2">
        14
    </div>
</div>

<script type="text/javascript">

$(document).ready(function () {
    var WaterFall = (function(){
        function init(){
            waterfull();
            $(window).resize(function(){
                waterfull()
            })
        }
        function waterfull(){
            var colLength = parseInt($('.content').width()/$('.item').outerWidth(true));
            var itemArr = [];
            for(var i = 0; i < colLength; i++) {
                itemArr[i] = 0
            }
            $('.item').each(function(){
                var minValue = Math.min.apply(null, itemArr);
                var minIndex = itemArr.indexOf(minValue);
                $(this).css({
                    top: itemArr[minIndex],
                    left: $(this).outerWidth(true) * minIndex
                });

                itemArr[minIndex] += $(this).outerHeight(true)

            })
        }
        return {
            init: init
        }
    })();
    WaterFall.init();
})

</script>
</body>
</html>
